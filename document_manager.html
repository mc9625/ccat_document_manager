<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Manager - Cheshire Cat AI</title>
    
    <!-- Preload native Rubik fonts for performance -->
    <link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-Bold.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-BoldItalic.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-Italic.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-Medium.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-MediumItalic.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-Regular.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-SemiBold.ttf" crossorigin="anonymous">
		<link rel="preload" as="font" type="font/ttf" href="/admin/assets/Rubik-SemiBoldItalic.ttf" crossorigin="anonymous">
    
    <!-- Link to the main stylesheet of Cheshire Cat AI -->
    <link rel="stylesheet" crossorigin="" href="/admin/assets/cat.css">
    
    <!-- Link to our custom minimal styles for adjustments - ENDPOINT AGGIORNATO -->
    <link rel="stylesheet" href="/custom/documents/style.css">
</head>
<body>
    <div class="flex min-h-screen flex-col scroll-smooth bg-base-300 text-sm text-neutral transition-colors selection:bg-primary md:text-base">
        <!-- Native Header -->
        <div class="navbar sticky top-0 z-30 min-h-fit bg-base-100 font-medium shadow-md md:px-[5%] lg:px-[10%]">
            <div class="navbar-start">
                <a href="/admin/plugins" class="shrink-0 !bg-transparent" aria-label="Back to plugins">
                    <img src="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='lvl_1'%20data-name='Level%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20117%20105.39'%3e%3cdefs%3e%3cstyle%3e%20.cls%20{%20fill:%20%23383938;%20stroke-width:%200px;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20class='cls'%20d='m115.43,95.64c-.49-.11-.97-.27-1.44-.42-1.84-.58-3-1.78-3.31-3.72-.11-.7-.17-1.41-.24-2.11-.1-.88-.63-1.45-1.45-1.53-.82-.08-1.46.37-1.72,1.22-.18.59-.35,1.19-.54,1.78-.59,1.8-1.79,2.92-3.68,3.23-.73.12-1.47.16-2.2.25-.8.1-1.37.64-1.45,1.38-.09.81.29,1.43,1.08,1.72.51.18,1.04.34,1.57.48,1.74.47,3,1.48,3.46,3.27.22.86.25,1.78.36,2.67.1.87.66,1.45,1.47,1.52.78.07,1.44-.4,1.7-1.21.15-.46.29-.93.41-1.4.55-2.03,1.79-3.33,3.91-3.66.58-.09,1.17-.16,1.76-.19.82-.03,1.41-.37,1.76-1.11.17-.34.12-.61.08-.8-.25-.75-.75-1.2-1.52-1.38Z'/%3e%3cpath%20class='cls'%20d='m59.81,12.11c.7.23,1.41.45,2.12.65,2.7.77,4.33,2.49,4.74,5.3.13.93.19,1.88.32,2.82.12.87.77,1.46,1.64,1.55.93.09,1.68-.39,1.98-1.29.28-.86.51-1.73.79-2.58.79-2.35,2.38-3.8,4.84-4.23,1-.18,2.02-.23,3.03-.36.94-.12,1.55-.75,1.65-1.64.1-.93-.37-1.67-1.29-1.98-.81-.27-1.64-.51-2.45-.76-2.41-.76-3.92-2.36-4.37-4.87-.18-1.01-.23-2.05-.36-3.08-.12-.92-.78-1.53-1.68-1.62-.89-.08-1.63.37-1.93,1.23-.28.81-.51,1.63-.76,2.45-.77,2.47-2.39,3.99-4.96,4.43-.99.17-1.99.22-2.99.35-.94.13-1.54.76-1.63,1.66-.09.91.4,1.66,1.31,1.97Z'/%3e%3cpath%20class='cls'%20d='m9.96,75.05c-.21-.1-.44-.17-.66-.24-1.19-.39-1.92-1.18-2.11-2.43-.04-.28-.07-.56-.14-.83-.15-.6-.59-.96-1.2-1.01-.75-.06-1.28.36-1.53,1.25-.37,1.32-1.21,2.09-2.57,2.3-.28.04-.56.06-.83.14-.51.14-.93.65-.94,1.17-.01.55.16,1.03.69,1.29.28.14.57.23.86.33,1.11.4,1.78,1.17,1.97,2.34.05.3.08.62.16.91.19.69.83,1.07,1.53.95.7-.12,1-.61,1.17-1.23.38-1.35,1.24-2.14,2.66-2.3.23-.03.47-.06.69-.12.54-.15.94-.65.99-1.18.04-.55-.25-1.08-.77-1.33Z'/%3e%3cpath%20class='cls'%20d='m109.25,61.57c0-.66-.03-1.31-.08-1.96.04-5.67-.18-41.9-12.48-52.9-.38-.9-1.3-1.65-3.1-.98-1.8.66-10.82,16.73-12.46,24.15-6.03-1.99-12.71-3.1-19.76-3.1s-14,1.16-20.12,3.22c-2.04-7.7-10.54-22.75-12.27-23.39-1.8-.67-2.72.08-3.1.98-13.36,11.95-12.47,53.65-12.47,53.65.03-.04.06-.08.09-.13,0,.16-.02.31-.02.46,0,19.22,21.44,34.81,47.89,34.81s47.89-15.58,47.89-34.81Zm-37.76-6.85c.55-.33,1.12-.56,1.65-.93,1.39-.95,2.04-2.97,2.02-5.92,0-.97-.13-2.8-.12-3.77,0-1.03.35-1.68.88-1.74.54-.06,1.03.52,1.27,1.54.27,1.14.59,3.16.88,4.28.73,2.77,1.9,4.32,3.43,4.76.52.15,1.04.27,1.56.44.59.19,1.12-.01,1.24,1.06.11,1.03-.45,1.13-.96,1.43-.56.33-1.14.57-1.68.94-1.33.92-2.07,2.01-2.09,4.82,0,1.02.03,2.05.03,3.08,0,1.08-.34,1.76-.9,1.82-.52.05-1-.5-1.23-1.47-.25-1.04-.46-2.11-.71-3.14-.76-3.13-1.93-3.94-3.63-4.34-.45-.11-.89-.22-1.34-.36-.58-.18-1.18-.15-1.3-1.2-.12-1.04.48-.98,1-1.3Zm-5.3,15.02c.1.8-1.23,2.66-2.17,2.77-.89.11-2.35-1.43-2.45-2.21-.1-.82,4.54-1.27,4.62-.56Zm-25.24-11.1c.55-.33,1.12-.56,1.65-.93,1.39-.95,2.04-2.97,2.02-5.92,0-.97-.13-2.8-.12-3.77,0-1.03.35-1.68.88-1.74.54-.06,1.03.52,1.27,1.54.27,1.14.59,3.16.88,4.28.73,2.77,1.9,4.32,3.43,4.76.52.15,1.04.27,1.56.44.59.19,1.12-.01,1.24,1.06.11,1.03-.45,1.13-.96,1.43-.56.33-1.14.57-1.68.94-1.33.92-2.07,2.01-2.09,4.82,0,1.02.03,2.05.03,3.08,0,1.08-.34,1.76-.9,1.82-.52.05-1-.5-1.23-1.47-.25-1.04-.46-2.11-.71-3.14-.76-3.13-1.93-3.94-3.63-4.34-.45-.11-.89-.22-1.34-.36-.58-.18-1.18-.15-1.3-1.2-.12-1.04.48-.98,1-1.3Zm25.59,32.5c-36.54,4.41-44.2-21-44.25-21.18,0-.04-.11-.93-.23-1.91,4.91,7.64,14.47,12.17,22.04,12.77,6.54.52,16.35-2.13,20.39-6.77,4.92,3.46,14.59,3.29,21.33,1.07,7.33-2.42,14.58-6.21,18.43-17.19.13,1.04.25,2.04.25,2.04-.01.28-1.41,26.76-37.95,31.17Z'/%3e%3c/svg%3e" class="hidden size-12 cursor-pointer dark:brightness-0 dark:invert md:block">
                </a>
            </div>
            <div class="navbar-center hidden md:flex">
                 <ul class="menu menu-horizontal menu-md gap-4 p-0">
                    <li>
                        <!-- ENDPOINT AGGIORNATO -->
                        <a href="/custom/documents" class="active">
                            <svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="size-4"><g fill="currentColor"><path fill-rule="evenodd" d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5zM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15m.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5z" clip-rule="evenodd"></path><path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279a9.77 9.77 0 0 0-6.963-6.963"></path></g></svg>
                            Document Manager
                        </a>
                    </li>
                </ul>
            </div>
            <div class="navbar-end">
                <!-- Admin Badge per indicare che Ã¨ solo per admin -->
                <div class="badge badge-warning gap-2">
                    <svg viewBox="0 0 24 24" width="1em" height="1em" class="size-3"><path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5z"/></svg>
                    Admin Only
                </div>
            </div>
        </div>

        <div class="flex w-full flex-col gap-8 self-center md:w-3/4 grow p-2 md:p-4">
            <!-- Search Section -->
            <div class="form-control w-full">
                <label class="label px-0"><span class="label-text font-semibold">Search documents</span></label>
                <div class="flex gap-2">
                    <div class="relative flex-1">
                        <input type="text" id="searchInput" class="input input-sm input-primary w-full shadow-lg !outline-2 !transition-all" placeholder="Enter a document name...">
                        <button class="btn btn-square btn-ghost btn-sm absolute right-0 top-0" aria-label="Search">
                            <svg viewBox="0 0 20 20" width="1.2em" height="1.2em" class="size-5"><path fill="currentColor" fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11M2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9" clip-rule="evenodd"></path></svg>
                        </button>
                    </div>
                    <div class="relative flex-1">
                        <input type="text" id="metadataSearchInput" class="input input-sm input-secondary w-full shadow-lg !outline-2 !transition-all" placeholder="Filter by metadata...">
                        <button class="btn btn-square btn-ghost btn-sm absolute right-0 top-0" aria-label="Filter metadata">
                            <svg viewBox="0 0 20 20" width="1.2em" height="1.2em" class="size-5"><path fill="currentColor" d="M2.75 3a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5zM2 7.75a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 7.75M2.75 11.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="label">
                    <span class="label-text-alt">Search by filename or content</span>
                    <span class="label-text-alt">Filter by metadata values (titles, categories, etc.)</span>
                </div>
            </div>

            <!-- Documents List -->
            <main id="documentsContent" class="documents-grid">
                <!-- Document cards will be inserted here by JS -->
            </main>
        </div>
    </div>

    <!-- Confirmation Dialog for Deletion -->
    <div id="confirmOverlay" class="fixed inset-0 bg-black/25 z-40 hidden"></div>
        <!-- Panel wrapper (centering helper) -->
    <div id="confirmWrapper"
        class="fixed inset-0 z-50 overflow-y-auto hidden">
        <div class="flex min-h-full items-center justify-center p-4 text-center">
            <!-- Dialog panel -->
            <div id="confirmPanel"
                class="w-fit max-w-lg overflow-hidden rounded-lg bg-base-100 p-4 shadow-xl transition-all">
            <div class="flex flex-col items-center justify-center gap-4 text-neutral">
                <h3 id="confirmPanelTitle" class="text-lg font-bold text-primary">Remove document</h3>
                <p id="confirmPanelBody">
                <!-- riempito via JS -->
                </p>
                <div class="flex items-center justify-center gap-2">
                <button id="confirmCancelBtn" class="btn btn-outline btn-sm">
                    No
                </button>
                <button id="confirmOkBtn" class="btn btn-error btn-sm">
                    Yes
                </button>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Slide-out Side Panel for Info -->
    <div id="infoPanel-overlay" class="panel-overlay">
        <aside id="infoPanel" class="side-panel">
            <div class="side-panel-header">
                <h2 id="infoPanelTitle" class="text-lg font-semibold">Document Info</h2>
                <button id="closeInfoPanel" class="btn btn-circle btn-sm btn-ghost" aria-label="Close panel">
                    <svg viewBox="0 0 20 20" width="1.2em" height="1.2em"><path fill="currentColor" d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94z"></path></svg>
                </button>
            </div>
            <div id="infoPanelBody" class="side-panel-body">
                <!-- Info content will be inserted here by JS -->
            </div>
        </aside>
    </div>

    <div id="notifications" class="toast toast-end"></div>

    <!-- ENDPOINT AGGIORNATO -->
    <script src="/custom/documents/script.js"></script>
</body>
</html>